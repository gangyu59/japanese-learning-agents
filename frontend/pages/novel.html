<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>📖 协作小说创作 - 日语学习系统</title>

  <!-- 样式外链：保持与你的工程一致 -->
  <link rel="stylesheet" href="../assets/css/main.css" />
  <link rel="stylesheet" href="../assets/css/novel.css" />
  <link rel="stylesheet" href="../assets/css/animations.css" />
  <link rel="stylesheet" href="../assets/css/responsive.css" />
</head>
<body>
  <div class="container">
    <!-- 标题 -->
    <header class="page-header">
      <h1>📖 协作小说创作</h1>
      <p>与智能体一起创造精彩的日语故事</p>
    </header>

    <!-- 状态栏 -->
    <div class="creation-status">
      <div class="status-item">
        <div class="status-icon">📝</div>
        <div class="status-info">
          <div class="status-label">当前项目</div>
          <div class="status-value">春天的邂逅</div>
        </div>
      </div>
      <div class="status-item">
        <div class="status-icon">👥</div>
        <div class="status-info">
          <div class="status-label">参与智能体</div>
          <div class="status-value">3个</div>
        </div>
      </div>
      <div class="status-item">
        <div class="status-icon">📊</div>
        <div class="status-info">
          <div class="status-label">进度</div>
          <div class="status-value">第2章</div>
        </div>
      </div>
      <div class="status-item">
        <div class="status-icon">💬</div>
        <div class="status-info">
          <div class="status-label">字数</div>
          <div class="status-value">1,247</div>
        </div>
      </div>
    </div>

    <!-- 项目选择/操作 -->
    <div class="project-controls">
      <div class="project-selector">
        <select class="project-select" id="current-project">
          <option value="spring-encounter" selected>春天的邂逅</option>
          <option value="tokyo-nights">东京夜话</option>
          <option value="school-festival">学园祭的回忆</option>
        </select>
      </div>
      <div class="project-actions">
        <button class="project-btn" id="btn-new-project"><span class="btn-icon">➕</span><span class="btn-text">新建项目</span></button>
        <button class="project-btn" id="btn-save-project"><span class="btn-icon">💾</span><span class="btn-text">保存</span></button>
        <button class="project-btn" id="btn-export-novel"><span class="btn-icon">📤</span><span class="btn-text">导出</span></button>
      </div>
    </div>

    <!-- 三栏工作区 -->
    <div class="creation-workspace">
      <!-- 左：智能体 -->
      <aside class="agents-panel">
        <div class="panel-header">
          <h3>🤖 协作智能体</h3>
          <button class="panel-toggle" id="btn-toggle-agents">›</button>
        </div>

        <div class="participating-agents">
          <div class="agent-item active" data-agent="koumi">
            <div class="agent-avatar koumi">美</div>
            <div class="agent-info">
              <div class="agent-name">小美</div>
              <div class="agent-role">情感描写</div>
              <div class="agent-status">正在思考...</div>
            </div>
            <div class="agent-mood">😊</div>
          </div>

          <div class="agent-item active" data-agent="yamada">
            <div class="agent-avatar yamada">山</div>
            <div class="agent-info">
              <div class="agent-name">山田</div>
              <div class="agent-role">文化背景</div>
              <div class="agent-status">在线</div>
            </div>
            <div class="agent-mood">😄</div>
          </div>

          <div class="agent-item active" data-agent="tanaka">
            <div class="agent-avatar tanaka">田</div>
            <div class="agent-info">
              <div class="agent-name">田中先生</div>
              <div class="agent-role">语言润色</div>
              <div class="agent-status">待命</div>
            </div>
            <div class="agent-mood">😐</div>
          </div>
        </div>

        <div class="agent-controls">
          <button class="control-btn" id="btn-invite-agents">邀请更多智能体</button>
          <button class="control-btn" id="btn-start-brainstorm">开始头脑风暴</button>
        </div>
      </aside>

      <!-- 中：故事内容 -->
      <main class="story-content">
        <div class="story-header">
          <h2>📚 春天的邂逅</h2>
          <div class="story-meta">
            <span class="genre-tag">浪漫</span>
            <span class="genre-tag">校园</span>
            <span class="genre-tag">青春</span>
          </div>
        </div>

        <div class="chapters-list">
          <!-- 第一章（样例） -->
          <section class="chapter-section">
            <div class="chapter-header">
              <h3>第一章：桜散る頃</h3>
              <div class="chapter-meta">
                <span class="word-count">486字</span>
                <span class="author-tag">小美主导</span>
              </div>
            </div>
            <div class="chapter-content">
              <div class="paragraph" data-author="koumi">
                <div class="author-indicator">小美</div>
                <div class="text-content">
                  <p class="japanese-text">桜の花びらが舞い散る四月の午後、私は新しい学期の始まりに胸を躍らせていた。東京の小さな大学のキャンパスは、淡いピンク色に染まり、まるで絵本の中の世界のようだった。</p>
                  <p class="translation">樱花花瓣飞舞的四月午后，我为新学期的开始而心潮澎湃。东京这所小大学的校园被淡淡的粉色染满，宛如绘本中的世界。</p>
                </div>
              </div>

              <div class="paragraph" data-author="yamada">
                <div class="author-indicator">山田</div>
                <div class="text-content">
                  <p class="japanese-text">この時期の日本では、新入生たちが希望に満ちた表情で校門をくぐる。桜は日本人にとって、新しい始まりの象徴なのだ。私もその一人として、文学部の建物に向かって歩いていた。</p>
                  <p class="translation">在日本的这个时期，新生们带着充满希望的表情跨进校门。樱花对日本人来说，是新开始的象征。我也作为其中一员，朝着文学部的建筑走去。</p>
                </div>
              </div>

              <div class="paragraph" data-author="koumi">
                <div class="author-indicator">小美</div>
                <div class="text-content">
                  <p class="japanese-text">その時、強い風が吹いて、私の書類が飛ばされてしまった。「あっ！」と叫んで追いかけようとした瞬間、一人の男子学生が私の書類を拾ってくれた。</p>
                  <p class="translation">就在那时，一阵强风吹来，我的文件被吹走了。“啊！”我叫着想要追上去的瞬间，一个男学生帮我捡起了文件。</p>
                </div>
              </div>
            </div>
          </section>

          <!-- 第二章（进行中） -->
          <section class="chapter-section current">
            <div class="chapter-header">
              <h3>第二章：運命の出会い</h3>
              <div class="chapter-meta">
                <span class="word-count">正在创作...</span>
                <span class="status-tag">进行中</span>
              </div>
            </div>

            <div class="chapter-content">
              <div class="collaboration-area">
                <div class="collab-header">
                  <div class="collab-icon">🤝</div>
                  <div class="collab-text">智能体正在协作创作下一段落...</div>
                </div>
                <div class="collab-participants">
                  <div class="participant active koumi">小美</div>
                  <div class="participant thinking yamada">山田</div>
                  <div class="participant waiting tanaka">田中先生</div>
                </div>
              </div>

              <div class="current-writing">
                <div class="writing-prompt">
                  <h4>💭 创作提示</h4>
                  <p>请继续描写主人公与男学生的第一次相遇。小美负责情感描写，山田补充文化背景，田中先生进行语言润色。</p>
                </div>

                <div class="draft-content">
                  <!-- 这里由 JS 动态插入轮写草稿 -->
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- 用户参与 -->
        <section class="user-input-area">
          <h4>💬 你的创意输入</h4>
          <div class="input-controls">
            <select class="input-type" id="input-type">
              <option value="suggestion">创作建议</option>
              <option value="dialogue">对话内容</option>
              <option value="description">场景描述</option>
              <option value="plot">情节发展</option>
            </select>
            <button class="voice-btn" id="btn-voice">🎤</button>
          </div>
          <textarea class="user-input" placeholder="输入你的创作想法或建议..."></textarea>
          <div class="input-actions">
            <button class="input-btn primary" id="btn-submit-idea">💡 提交想法</button>
            <button class="input-btn secondary" id="btn-ai-help">🤖 请求AI协助</button>
          </div>
        </section>
      </main>

      <!-- 右：工具栏 -->
      <aside class="tools-panel">
        <div class="panel-header"><h3>🛠️ 创作工具</h3></div>

        <div class="tool-section">
          <h4>📋 故事大纲</h4>
          <div class="outline-content">
            <div class="outline-item completed"><div class="outline-icon">✓</div><div class="outline-text">第一章：相遇</div></div>
            <div class="outline-item current"><div class="outline-icon">📝</div><div class="outline-text">第二章：初次对话</div></div>
            <div class="outline-item"><div class="outline-icon">📖</div><div class="outline-text">第三章：逐渐了解</div></div>
            <div class="outline-item"><div class="outline-icon">💕</div><div class="outline-text">第四章：情感萌芽</div></div>
            <div class="outline-item"><div class="outline-icon">🌸</div><div class="outline-text">结局：樱花再开时</div></div>
          </div>
        </div>

        <div class="tool-section">
          <h4>👥 角色设定</h4>
          <div class="characters-list">
            <div class="character-card"><div class="char-avatar">👧</div><div class="char-info"><div class="char-name">美咲 (みさき)</div><div class="char-desc">文学部二年级，喜欢读书</div></div></div>
            <div class="character-card"><div class="char-avatar">👦</div><div class="char-info"><div class="char-name">拓也 (たくや)</div><div class="char-desc">工学部三年级，温柔体贴</div></div></div>
          </div>
          <button class="tool-btn" id="btn-add-character">+ 添加角色</button>
        </div>

        <div class="tool-section">
          <h4>📚 词汇助手</h4>
          <div class="vocab-tools">
            <input type="text" class="vocab-input" placeholder="输入单词查找..." />
            <button class="vocab-btn" id="btn-lookup">🔍</button>
          </div>
          <div class="recent-words">
            <h5>最近使用</h5>
            <div class="word-list">
              <span class="word-tag">桜 (さくら)</span>
              <span class="word-tag">出会い (であい)</span>
              <span class="word-tag">運命 (うんめい)</span>
            </div>
          </div>
        </div>

        <div class="tool-section">
          <h4>📊 写作统计</h4>
          <div class="stats-grid">
            <div class="stat-item"><div class="stat-number">1,247</div><div class="stat-label">总字数</div></div>
            <div class="stat-item"><div class="stat-number">2</div><div class="stat-label">章节数</div></div>
            <div class="stat-item"><div class="stat-number">15</div><div class="stat-label">段落数</div></div>
            <div class="stat-item"><div class="stat-number">85%</div><div class="stat-label">完成度</div></div>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <!-- 功能脚本（ES Modules） -->
  <script type="module" src="../assets/js/novel.js"></script>
</body>
</html>
