<!--<!DOCTYPE html>-->
<!--<html lang="zh-CN">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>æ—¥è¯­å­¦ä¹  - Learning Page</title>-->
<!--    <style>-->
<!--        * {-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            box-sizing: border-box;-->
<!--        }-->

<!--        body {-->
<!--            font-family: 'Microsoft YaHei', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);-->
<!--            min-height: 100vh;-->
<!--            color: #333;-->
<!--        }-->

<!--        .container {-->
<!--            max-width: 1200px;-->
<!--            margin: 0 auto;-->
<!--            padding: 20px;-->
<!--        }-->

<!--        .header {-->
<!--            background: rgba(255, 255, 255, 0.95);-->
<!--            backdrop-filter: blur(10px);-->
<!--            border-radius: 20px;-->
<!--            padding: 30px;-->
<!--            margin-bottom: 30px;-->
<!--            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);-->
<!--            text-align: center;-->
<!--        }-->

<!--        .header h1 {-->
<!--            font-size: 2.5em;-->
<!--            background: linear-gradient(45deg, #667eea, #764ba2);-->
<!--            -webkit-background-clip: text;-->
<!--            -webkit-text-fill-color: transparent;-->
<!--            margin-bottom: 10px;-->
<!--        }-->

<!--        .header p {-->
<!--            color: #666;-->
<!--            font-size: 1.1em;-->
<!--        }-->

<!--        .main-content {-->
<!--            display: grid;-->
<!--            grid-template-columns: 1fr 300px;-->
<!--            gap: 30px;-->
<!--        }-->

<!--        .chat-area {-->
<!--            background: rgba(255, 255, 255, 0.95);-->
<!--            border-radius: 20px;-->
<!--            padding: 25px;-->
<!--            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);-->
<!--            min-height: 600px;-->
<!--            display: flex;-->
<!--            flex-direction: column;-->
<!--        }-->

<!--        .agents-panel {-->
<!--            background: rgba(255, 255, 255, 0.95);-->
<!--            border-radius: 20px;-->
<!--            padding: 25px;-->
<!--            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);-->
<!--            height: fit-content;-->
<!--        }-->

<!--        .agents-title {-->
<!--            font-size: 1.3em;-->
<!--            margin-bottom: 20px;-->
<!--            color: #2c3e50;-->
<!--            text-align: center;-->
<!--        }-->

<!--        .agent-card {-->
<!--            background: #f8f9fa;-->
<!--            border-radius: 15px;-->
<!--            padding: 15px;-->
<!--            margin-bottom: 15px;-->
<!--            cursor: pointer;-->
<!--            transition: all 0.3s ease;-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            gap: 15px;-->
<!--        }-->

<!--        .agent-card:hover {-->
<!--            background: #e9ecef;-->
<!--            transform: translateY(-2px);-->
<!--            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);-->
<!--        }-->

<!--        .agent-avatar {-->
<!--            width: 50px;-->
<!--            height: 50px;-->
<!--            border-radius: 50%;-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            justify-content: center;-->
<!--            color: white;-->
<!--            font-weight: bold;-->
<!--            font-size: 18px;-->
<!--        }-->

<!--        .tanaka { background: linear-gradient(45deg, #2196F3, #1976D2); }-->
<!--        .koumi { background: linear-gradient(45deg, #E91E63, #C2185B); }-->
<!--        .ai { background: linear-gradient(45deg, #9C27B0, #7B1FA2); }-->

<!--        .agent-info {-->
<!--            flex: 1;-->
<!--        }-->

<!--        .agent-name {-->
<!--            font-weight: 600;-->
<!--            margin-bottom: 3px;-->
<!--            color: #2c3e50;-->
<!--        }-->

<!--        .agent-role {-->
<!--            font-size: 0.9em;-->
<!--            color: #666;-->
<!--        }-->

<!--        .chat-messages {-->
<!--            flex: 1;-->
<!--            overflow-y: auto;-->
<!--            margin-bottom: 20px;-->
<!--            padding: 20px;-->
<!--            background: #f8f9fa;-->
<!--            border-radius: 15px;-->
<!--            min-height: 400px;-->
<!--        }-->

<!--        .message {-->
<!--            margin-bottom: 15px;-->
<!--            padding: 15px;-->
<!--            border-radius: 15px;-->
<!--            max-width: 80%;-->
<!--        }-->

<!--        .user-message {-->
<!--            background: #667eea;-->
<!--            color: white;-->
<!--            margin-left: auto;-->
<!--        }-->

<!--        .agent-message {-->
<!--            background: white;-->
<!--            border: 1px solid #e9ecef;-->
<!--        }-->

<!--        .chat-input {-->
<!--            display: flex;-->
<!--            gap: 10px;-->
<!--        }-->

<!--        .input-field {-->
<!--            flex: 1;-->
<!--            padding: 12px 15px;-->
<!--            border: 2px solid #e9ecef;-->
<!--            border-radius: 25px;-->
<!--            font-size: 16px;-->
<!--        }-->

<!--        .send-button {-->
<!--            padding: 12px 20px;-->
<!--            background: linear-gradient(45deg, #667eea, #764ba2);-->
<!--            color: white;-->
<!--            border: none;-->
<!--            border-radius: 25px;-->
<!--            cursor: pointer;-->
<!--            font-size: 16px;-->
<!--        }-->

<!--        .send-button:hover {-->
<!--            transform: translateY(-2px);-->
<!--            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);-->
<!--        }-->

<!--        @media (max-width: 768px) {-->
<!--            .main-content {-->
<!--                grid-template-columns: 1fr;-->
<!--            }-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--    <div class="container">-->
<!--        <div class="header">-->
<!--            <h1>ğŸ“š æ—¥è¯­å­¦ä¹ ç³»ç»Ÿ</h1>-->
<!--            <p>ä¸æ™ºèƒ½ä½“è€å¸ˆä¸€èµ·å­¦ä¹ æ—¥è¯­</p>-->
<!--        </div>-->

<!--        <div class="main-content">-->
<!--            <div class="chat-area">-->
<!--                <div class="chat-messages" id="chatMessages">-->
<!--                    <div class="message agent-message">-->
<!--                        <strong>ç”°ä¸­å…ˆç”Ÿï¼š</strong> ã“ã‚“ã«ã¡ã¯ï¼æ—¥æœ¬èªã®å‹‰å¼·ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼-->
<!--                    </div>-->
<!--                    <div class="message user-message">-->
<!--                        ä½ å¥½ï¼æˆ‘æƒ³å­¦ä¹ æ—¥è¯­åŸºç¡€è¯­æ³•-->
<!--                    </div>-->
<!--                    <div class="message agent-message">-->
<!--                        <strong>ç”°ä¸­å…ˆç”Ÿï¼š</strong> å¾ˆå¥½ï¼æˆ‘ä»¬ä»æœ€åŸºç¡€çš„ã€Œã§ã™ãƒ»ã¾ã™ã€æ•¬è¯­å¼€å§‹ã€‚è¿™æ˜¯æ—¥è¯­ä¸­æœ€é‡è¦çš„ç¤¼è²Œè¡¨è¾¾æ–¹å¼ã€‚-->
<!--                    </div>-->
<!--                </div>-->

<!--                <div class="chat-input">-->
<!--                    <input type="text" class="input-field" placeholder="è¾“å…¥æ‚¨çš„æ¶ˆæ¯..." id="messageInput">-->
<!--                    <button class="send-button" onclick="sendMessage()">å‘é€</button>-->
<!--                </div>-->
<!--            </div>-->

<!--            <div class="agents-panel">-->
<!--                <h3 class="agents-title">é€‰æ‹©æ™ºèƒ½ä½“è€å¸ˆ</h3>-->

<!--                <div class="agent-card" onclick="selectAgent('tanaka')">-->
<!--                    <div class="agent-avatar tanaka">ç”°</div>-->
<!--                    <div class="agent-info">-->
<!--                        <div class="agent-name">ç”°ä¸­å…ˆç”Ÿ</div>-->
<!--                        <div class="agent-role">è¯­æ³•ä¸“å®¶</div>-->
<!--                    </div>-->
<!--                </div>-->

<!--                <div class="agent-card" onclick="selectAgent('koumi')">-->
<!--                    <div class="agent-avatar koumi">ç¾</div>-->
<!--                    <div class="agent-info">-->
<!--                        <div class="agent-name">å°ç¾</div>-->
<!--                        <div class="agent-role">å¯¹è¯ä¼™ä¼´</div>-->
<!--                    </div>-->
<!--                </div>-->

<!--                <div class="agent-card" onclick="selectAgent('ai')">-->
<!--                    <div class="agent-avatar ai">AI</div>-->
<!--                    <div class="agent-info">-->
<!--                        <div class="agent-name">ã‚¢ã‚¤åŠ©æ‰‹</div>-->
<!--                        <div class="agent-role">å­¦ä¹ åˆ†æ</div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    <script>-->
<!--        let currentAgent = 'tanaka';-->

<!--        function selectAgent(agentId) {-->
<!--            currentAgent = agentId;-->

<!--            const agents = {-->
<!--                'tanaka': 'ç”°ä¸­å…ˆç”Ÿ',-->
<!--                'koumi': 'å°ç¾',-->
<!--                'ai': 'ã‚¢ã‚¤åŠ©æ‰‹'-->
<!--            };-->

<!--            showNotification(`å·²é€‰æ‹© ${agents[agentId]} ä½œä¸ºå¯¹è¯å¯¹è±¡`);-->
<!--        }-->

<!--        function sendMessage() {-->
<!--            const input = document.getElementById('messageInput');-->
<!--            const message = input.value.trim();-->

<!--            if (message) {-->
<!--                addMessage(message, 'user');-->
<!--                input.value = '';-->

<!--                // æ¨¡æ‹Ÿæ™ºèƒ½ä½“å›å¤-->
<!--                setTimeout(() => {-->
<!--                    const responses = [-->
<!--                        'å¾ˆå¥½çš„é—®é¢˜ï¼è®©æˆ‘æ¥è¯¦ç»†è§£é‡Š...',-->
<!--                        'è¿™ä¸ªè¯­æ³•ç‚¹ç¡®å®æ¯”è¾ƒéš¾ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥å­¦ä¹ ',-->
<!--                        'ã‚ãªãŸã®æ—¥æœ¬èªã¯ã¨ã¦ã‚‚ä¸Šæ‰‹ã§ã™ã­ï¼',-->
<!--                        'æˆ‘å»ºè®®æ‚¨å¤šç»ƒä¹ è¿™ç±»å¥å‹'-->
<!--                    ];-->
<!--                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];-->
<!--                    addMessage(randomResponse, 'agent');-->
<!--                }, 1000);-->
<!--            }-->
<!--        }-->

<!--        function addMessage(content, sender) {-->
<!--            const chatMessages = document.getElementById('chatMessages');-->
<!--            const messageDiv = document.createElement('div');-->
<!--            messageDiv.className = `message ${sender}-message`;-->

<!--            if (sender === 'agent') {-->
<!--                const agents = {-->
<!--                    'tanaka': 'ç”°ä¸­å…ˆç”Ÿ',-->
<!--                    'koumi': 'å°ç¾',-->
<!--                    'ai': 'ã‚¢ã‚¤åŠ©æ‰‹'-->
<!--                };-->
<!--                messageDiv.innerHTML = `<strong>${agents[currentAgent]}ï¼š</strong> ${content}`;-->
<!--            } else {-->
<!--                messageDiv.textContent = content;-->
<!--            }-->

<!--            chatMessages.appendChild(messageDiv);-->
<!--            chatMessages.scrollTop = chatMessages.scrollHeight;-->
<!--        }-->

<!--        function showNotification(message) {-->
<!--            const notification = document.createElement('div');-->
<!--            notification.style.cssText = `-->
<!--                position: fixed;-->
<!--                top: 20px;-->
<!--                right: 20px;-->
<!--                padding: 15px 25px;-->
<!--                background: #667eea;-->
<!--                color: white;-->
<!--                border-radius: 10px;-->
<!--                box-shadow: 0 5px 15px rgba(0,0,0,0.3);-->
<!--                z-index: 10000;-->
<!--            `;-->
<!--            notification.textContent = message;-->

<!--            document.body.appendChild(notification);-->

<!--            setTimeout(() => notification.remove(), 3000);-->
<!--        }-->

<!--        // å›è½¦å‘é€æ¶ˆæ¯-->
<!--        document.getElementById('messageInput').addEventListener('keypress', function(e) {-->
<!--            if (e.key === 'Enter') {-->
<!--                sendMessage();-->
<!--            }-->
<!--        });-->
<!--    </script>-->
<!--</body>-->
<!--</html>-->


<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥è¯­å­¦ä¹  - Learning Page</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
        }

        .chat-area {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            min-height: 600px;
            display: flex;
            flex-direction: column;
        }

        .agents-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            height: fit-content;
        }

        .agents-title {
            font-size: 1.3em;
            margin-bottom: 20px;
            color: #2c3e50;
            text-align: center;
        }

        .agent-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            border: 2px solid transparent;
            position: relative;
        }

        .agent-card:hover {
            background: #e9ecef;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .agent-card.active {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .agent-card.active::after {
            content: 'âœ“';
            position: absolute;
            top: 8px;
            right: 10px;
            color: #667eea;
            font-weight: bold;
        }

        .agent-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }

        .tanaka { background: linear-gradient(45deg, #2196F3, #1976D2); }
        .koumi { background: linear-gradient(45deg, #E91E63, #C2185B); }
        .ai { background: linear-gradient(45deg, #9C27B0, #7B1FA2); }
        .yamada { background: linear-gradient(45deg, #FF9800, #F57C00); }
        .sato { background: linear-gradient(45deg, #4CAF50, #388E3C); }
        .membot { background: linear-gradient(45deg, #607D8B, #455A64); }

        .agent-info {
            flex: 1;
        }

        .agent-name {
            font-weight: 600;
            margin-bottom: 3px;
            color: #2c3e50;
        }

        .agent-role {
            font-size: 0.9em;
            color: #666;
        }

        .agent-emotion {
            font-size: 1.2em;
            margin-left: auto;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            min-height: 400px;
        }

        .message {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 15px;
            max-width: 80%;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            background: #667eea;
            color: white;
            margin-left: auto;
            border-radius: 15px 15px 5px 15px;
        }

        .agent-message {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 15px 15px 15px 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .agent-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .agent-avatar-small {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 8px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }

        .learning-points {
            margin-top: 10px;
            padding: 10px;
            background: #f0f8ff;
            border-left: 4px solid #667eea;
            border-radius: 5px;
            font-size: 0.9em;
        }

        .suggestions {
            margin-top: 8px;
            padding: 8px;
            background: #f0fff0;
            border-left: 4px solid #4CAF50;
            border-radius: 5px;
            font-size: 0.9em;
        }

        .chat-input {
            display: flex;
            gap: 10px;
        }

        .input-field {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: #667eea;
        }

        .send-button {
            padding: 12px 20px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            min-width: 60px;
        }

        .send-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .send-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“š æ—¥è¯­å­¦ä¹ ç³»ç»Ÿ</h1>
            <p>ä¸AIæ™ºèƒ½ä½“è€å¸ˆä¸€èµ·å­¦ä¹ æ—¥è¯­</p>
        </div>

        <div class="main-content">
            <div class="chat-area">
                <div class="chat-messages" id="chatMessages">
                    <div class="message agent-message">
                        <div class="agent-header">
                            <div class="agent-avatar-small tanaka">ç”°</div>
                            <span>ç”°ä¸­å…ˆç”Ÿï¼š</span>
                            <span class="agent-emotion">ğŸ˜Š</span>
                        </div>
                        <div>ã“ã‚“ã«ã¡ã¯ï¼æ—¥æœ¬èªã®å‹‰å¼·ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼æˆ‘æ˜¯ç”°ä¸­è€å¸ˆï¼Œä¸“é—¨è´Ÿè´£è¯­æ³•æ•™å­¦ã€‚è¯·é€‰æ‹©æ‚¨æƒ³è¦æ¿€æ´»çš„æ™ºèƒ½ä½“è€å¸ˆä»¬ã€‚</div>
                    </div>
                </div>

                <div class="chat-input">
                    <input type="text" class="input-field" placeholder="è¾“å…¥æ‚¨çš„æ¶ˆæ¯..." id="messageInput">
                    <button class="send-button" onclick="sendMessage()" id="sendButton">å‘é€</button>
                </div>
            </div>

            <div class="agents-panel">
                <h3 class="agents-title">é€‰æ‹©æ™ºèƒ½ä½“è€å¸ˆ</h3>

                <div class="agent-card" onclick="selectAgent('tanaka')" id="card-tanaka">
                    <div class="agent-avatar tanaka">ç”°</div>
                    <div class="agent-info">
                        <div class="agent-name">ç”°ä¸­å…ˆç”Ÿ</div>
                        <div class="agent-role">è¯­æ³•ä¸“å®¶</div>
                    </div>
                    <div class="agent-emotion" id="emotion-tanaka">ğŸ˜</div>
                </div>

                <div class="agent-card" onclick="selectAgent('koumi')" id="card-koumi">
                    <div class="agent-avatar koumi">ç¾</div>
                    <div class="agent-info">
                        <div class="agent-name">å°ç¾</div>
                        <div class="agent-role">å¯¹è¯ä¼™ä¼´</div>
                    </div>
                    <div class="agent-emotion" id="emotion-koumi">ğŸ˜Š</div>
                </div>

                <div class="agent-card" onclick="selectAgent('ai')" id="card-ai">
                    <div class="agent-avatar ai">AI</div>
                    <div class="agent-info">
                        <div class="agent-name">ã‚¢ã‚¤åŠ©æ‰‹</div>
                        <div class="agent-role">æ•°æ®åˆ†æå¸ˆ</div>
                    </div>
                    <div class="agent-emotion" id="emotion-ai">ğŸ”</div>
                </div>

                <div class="agent-card" onclick="selectAgent('yamada')" id="card-yamada">
                    <div class="agent-avatar yamada">å±±</div>
                    <div class="agent-info">
                        <div class="agent-name">å±±ç”°å…ˆç”Ÿ</div>
                        <div class="agent-role">æ–‡åŒ–ä¸“å®¶</div>
                    </div>
                    <div class="agent-emotion" id="emotion-yamada">ğŸ˜Œ</div>
                </div>

                <div class="agent-card" onclick="selectAgent('sato')" id="card-sato">
                    <div class="agent-avatar sato">ä½</div>
                    <div class="agent-info">
                        <div class="agent-name">ä½è—¤æ•™ç»ƒ</div>
                        <div class="agent-role">è€ƒè¯•ä¸“å®¶</div>
                    </div>
                    <div class="agent-emotion" id="emotion-sato">ğŸ’ª</div>
                </div>

                <div class="agent-card" onclick="selectAgent('membot')" id="card-membot">
                    <div class="agent-avatar membot">M</div>
                    <div class="agent-info">
                        <div class="agent-name">MemBot</div>
                        <div class="agent-role">è®°å¿†ç®¡å®¶</div>
                    </div>
                    <div class="agent-emotion" id="emotion-membot">ğŸ§ </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE_URL = 'http://localhost:8000';

        const agents = {
            'tanaka': { name: 'ç”°ä¸­å…ˆç”Ÿ', role: 'è¯­æ³•ä¸“å®¶', emotions: ['ğŸ˜', 'ğŸ¤”', 'ğŸ˜¤', 'ğŸ˜Š', 'ğŸ‘'] },
            'koumi': { name: 'å°ç¾', role: 'å¯¹è¯ä¼™ä¼´', emotions: ['ğŸ˜Š', 'ğŸ˜„', 'ğŸ¤—', 'ğŸ˜†', 'ğŸ’•'] },
            'ai': { name: 'ã‚¢ã‚¤åŠ©æ‰‹', role: 'æ•°æ®åˆ†æå¸ˆ', emotions: ['ğŸ”', 'ğŸ“Š', 'ğŸ’¡', 'âš¡', 'ğŸ¯'] },
            'yamada': { name: 'å±±ç”°å…ˆç”Ÿ', role: 'æ–‡åŒ–ä¸“å®¶', emotions: ['ğŸ˜Œ', 'ğŸ', 'â›©ï¸', 'ğŸƒ', 'ğŸ“¿'] },
            'sato': { name: 'ä½è—¤æ•™ç»ƒ', role: 'è€ƒè¯•ä¸“å®¶', emotions: ['ğŸ¯', 'ğŸ’ª', 'ğŸ“ˆ', 'â°', 'ğŸ†'] },
            'membot': { name: 'MemBot', role: 'è®°å¿†ç®¡å®¶', emotions: ['ğŸ§ ', 'ğŸ“š', 'â°', 'ğŸ’¾', 'ğŸ“ˆ'] }
        };

        let currentAgents = new Set();
        let sessionId = 'session_' + Date.now();
        let isProcessing = false;

        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('messageInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
        });

        function selectAgent(agentId) {
            const card = document.getElementById(`card-${agentId}`);

            if (currentAgents.has(agentId)) {
                currentAgents.delete(agentId);
                card.classList.remove('active');
                showNotification(`${agents[agentId].name} å·²åœç”¨`);
            } else {
                currentAgents.add(agentId);
                card.classList.add('active');
                showNotification(`${agents[agentId].name} å·²æ¿€æ´»`);
                addAgentMessage(agentId, `ã“ã‚“ã«ã¡ã¯ï¼${agents[agentId].name}ã§ã™ã€‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼`, [], [], getRandomEmotion(agentId));
            }
        }

        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();

            if (!message || isProcessing) return;

            if (currentAgents.size === 0) {
                showNotification('è¯·å…ˆé€‰æ‹©è‡³å°‘ä¸€ä¸ªæ™ºèƒ½ä½“è€å¸ˆï¼');
                return;
            }

            addMessage(message, 'user');
            input.value = '';
            setProcessing(true);

            try {
                await processMessageWithAPI(message);
            } catch (error) {
                console.error('æ¶ˆæ¯å¤„ç†é”™è¯¯:', error);
                addSystemMessage('æŠ±æ­‰ï¼Œç³»ç»Ÿå‡ºç°é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•ã€‚');
            } finally {
                setProcessing(false);
            }
        }

        async function processMessageWithAPI(userMessage) {
            const activeAgentsList = Array.from(currentAgents);

            for (const [idx, agentId] of activeAgentsList.entries()) {
                try {
                    if (idx > 0) {
                        await new Promise(resolve => setTimeout(resolve, 1500));
                    }

                    const requestBody = {
                        message: String(userMessage),
                        user_id: 'demo_user',
                        session_id: sessionId,
                        agent_name: agents[agentId].name,
                        scene_context: 'general'
                    };

                    console.log(`å‘é€ç»™ ${agents[agentId].name}:`, requestBody);

                    const response = await fetch(`${API_BASE_URL}/api/v1/chat/send`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json; charset=utf-8',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify(requestBody)
                    });

                    if (response.ok) {
                        const data = await response.json();
                        console.log(`${agents[agentId].name} å“åº”:`, data);

                        if (data.success && data.response) {
                            const emotion = data.emotion || getRandomEmotion(agentId);
                            updateAgentEmotion(agentId, emotion);
                            addAgentMessage(agentId, data.response, data.learning_points || [], data.suggestions || [], emotion);
                        } else {
                            addAgentMessage(agentId, data.response || 'æŠ±æ­‰ï¼Œæˆ‘æ— æ³•ç†è§£æ‚¨çš„é—®é¢˜ã€‚', [], [], 'ğŸ˜…');
                        }
                    } else {
                        console.error(`APIè¯·æ±‚å¤±è´¥ (${agents[agentId].name}):`, response.status);
                        addAgentMessage(agentId, 'æŠ±æ­‰ï¼Œæˆ‘ç°åœ¨æ— æ³•å›ç­”ï¼Œè¯·ç¨åå†è¯•ã€‚', [], [], 'ğŸ˜µ');
                    }
                } catch (error) {
                    console.error(`è¯·æ±‚ ${agents[agentId].name} æ—¶å‡ºé”™:`, error);
                    addAgentMessage(agentId, 'è¿æ¥å‡ºç°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ã€‚', [], [], 'ğŸ˜µ');
                }
            }
        }

        function addMessage(content, sender) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            messageDiv.textContent = content;
            chatMessages.appendChild(messageDiv);
            scrollToBottom();
        }

        function addAgentMessage(agentId, content, learningPoints, suggestions, emotion) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message agent-message';

            let html = `
                <div class="agent-header">
                    <div class="agent-avatar-small ${agentId}">${getAgentAvatar(agentId)}</div>
                    <span>${agents[agentId].name}ï¼š</span>
                    <span class="agent-emotion">${emotion}</span>
                </div>
                <div>${content}</div>
            `;

            if (learningPoints && learningPoints.length > 0) {
                html += `<div class="learning-points"><strong>ğŸ“š å­¦ä¹ ç‚¹ï¼š</strong> ${learningPoints.join(' â€¢ ')}</div>`;
            }

            if (suggestions && suggestions.length > 0) {
                html += `<div class="suggestions"><strong>ğŸ’¡ å»ºè®®ï¼š</strong> ${suggestions.join(' â€¢ ')}</div>`;
            }

            messageDiv.innerHTML = html;
            chatMessages.appendChild(messageDiv);
            scrollToBottom();
        }

        function addSystemMessage(content) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message agent-message';
            messageDiv.innerHTML = `
                <div class="agent-header">
                    <span style="color: #666;">ğŸ”” ç³»ç»Ÿï¼š</span>
                </div>
                <div>${content}</div>
            `;
            chatMessages.appendChild(messageDiv);
            scrollToBottom();
        }

        function getAgentAvatar(agentId) {
            const avatars = {
                'tanaka': 'ç”°', 'koumi': 'ç¾', 'ai': 'AI',
                'yamada': 'å±±', 'sato': 'ä½', 'membot': 'M'
            };
            return avatars[agentId] || '?';
        }

        function updateAgentEmotion(agentId, emotion) {
            const emotionElement = document.getElementById(`emotion-${agentId}`);
            if (emotionElement) {
                emotionElement.textContent = emotion;
            }
        }

        function getRandomEmotion(agentId) {
            const emotions = agents[agentId].emotions;
            return emotions[Math.floor(Math.random() * emotions.length)];
        }

        function setProcessing(processing) {
            isProcessing = processing;
            const sendButton = document.getElementById('sendButton');
            const input = document.getElementById('messageInput');

            if (processing) {
                sendButton.innerHTML = '<div class="loading"></div>';
                sendButton.disabled = true;
                input.disabled = true;
            } else {
                sendButton.innerHTML = 'å‘é€';
                sendButton.disabled = false;
                input.disabled = false;
            }
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                background: #667eea;
                color: white;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 3000);
        }

        function scrollToBottom() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
    </script>
</body>
</html>