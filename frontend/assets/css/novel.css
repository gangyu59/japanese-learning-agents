/* frontend/assets/css/novel.css */
.container { max-width: 1400px; margin: 0 auto; padding: 20px; }
.page-header { text-align: center; margin-bottom: 30px; }
.page-header h1 {
  font-size: 2.5rem; margin-bottom: 10px;
  background: linear-gradient(45deg,#FF6B6B,#4ECDC4);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}

/* 状态栏 */
.creation-status{ display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:20px; margin-bottom:30px;}
.status-item{ background:#fff; padding:20px; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,.1); display:flex; align-items:center; gap:15px;}
.status-label{ color:#666; font-size:.9rem;} .status-value{ color:#333; font-size:1.2rem; font-weight:700;}

/* 项目控制 */
.project-controls{ display:flex; justify-content:space-between; align-items:center; margin-bottom:30px; background:#fff; padding:20px; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,.1);}
.project-select{ padding:10px 15px; border:2px solid #ddd; border-radius:8px; background:#fff; min-width:200px;}
.project-actions{ display:flex; gap:10px;}
.project-btn{ display:flex; align-items:center; gap:8px; padding:10px 20px; background:linear-gradient(45deg,#FF6B6B,#4ECDC4); color:#fff; border:none; border-radius:25px; cursor:pointer; font-weight:500; transition:all .3s;}
.project-btn:hover{ transform:translateY(-2px); box-shadow:0 8px 25px rgba(0,0,0,.15);}

/* 三栏工作区 */
.creation-workspace{ display:grid; grid-template-columns:250px 1fr 300px; gap:20px; min-height:600px;}

/* 左栏：智能体 */
.agents-panel{ background:#fff; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,.1); padding:20px; }
.panel-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; padding-bottom:15px; border-bottom:1px solid #eee;}
.participating-agents{ display:flex; flex-direction:column; gap:15px; margin-bottom:20px;}
.agent-item{ display:flex; align-items:center; gap:12px; padding:15px; background:#f8f9fa; border-radius:10px;}
.agent-item.active{ background:#e3f2fd; border-left:3px solid #2196F3;}
.agent-avatar{ width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center; color:#fff; font-weight:700; font-size:1.1rem;}
.agent-avatar.koumi{ background:linear-gradient(45deg,#E91E63,#C2185B);}
.agent-avatar.yamada{ background:linear-gradient(45deg,#FF9800,#F57C00);}
.agent-avatar.tanaka{ background:linear-gradient(45deg,#2196F3,#1976D2);}
.agent-role{ color:#666; font-size:.8rem;} .agent-status{ color:#888; font-size:.75rem;}
.control-btn{ padding:8px 16px; background:#f5f5f5; border:1px solid #ddd; border-radius:20px; cursor:pointer; font-size:.85rem; }
.control-btn:hover{ background:#e0e0e0; }

/* 中栏：故事内容 */
.story-content{ background:#fff; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,.1); padding:30px; overflow-y:auto;}
.story-header{ text-align:center; margin-bottom:30px; padding-bottom:20px; border-bottom:2px solid #f0f0f0;}
.story-meta{ display:flex; justify-content:center; gap:10px; margin-top:15px;}
.genre-tag{ padding:4px 12px; background:#e3f2fd; color:#1976d2; border-radius:15px; font-size:.8rem;}

.chapter-section{ border:1px solid #f0f0f0; border-radius:10px; padding:25px; }
.chapter-section.current{ border-color:#4ECDC4; background:#f9ffff; }
.chapter-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; padding-bottom:15px; border-bottom:1px solid #eee;}
.author-tag{ background:#f0f4ff; color:#667eea; padding:3px 10px; border-radius:12px; font-size:.8rem;}
.status-tag{ background:#fff3e0; color:#ff9800; padding:3px 10px; border-radius:12px; font-size:.8rem;}

.paragraph{ margin-bottom:20px; padding:20px; border-radius:10px; background:#fafafa; position:relative;}
.paragraph.draft{ background:#fff8e1; border-left:4px solid #ffc107;}
.paragraph.approved{ background:#f1f8e9; border-left:4px solid #4caf50;}
.author-indicator{ position:absolute; top:-8px; left:15px; background:#fff; padding:2px 8px; border-radius:10px; font-size:.75rem; color:#666; border:1px solid #ddd;}
.japanese-text{ font-size:1.1rem; line-height:1.8; margin-bottom:10px; color:#333;}
.translation{ font-size:.95rem; line-height:1.6; color:#666; font-style:italic; padding-left:15px; border-left:2px solid #e0e0e0;}
.draft-actions{ display:flex; gap:10px; margin-top:15px;}
.draft-btn{ padding:5px 12px; border:none; border-radius:15px; cursor:pointer; font-size:.8rem;}
.draft-btn[data-action="approve"]{ background:#4caf50; color:#fff;}
.draft-btn[data-action="revise"]{ background:#ff9800; color:#fff;}
.draft-btn[data-action="reject"]{ background:#f44336; color:#fff;}

/* 协作状态条 */
.collaboration-area{ background:#f0f8ff; padding:20px; border-radius:10px; margin-bottom:20px; text-align:center;}
.collab-participants{ display:flex; justify-content:center; gap:10px;}
.participant{ padding:5px 12px; border-radius:15px; font-size:.8rem; font-weight:500; border:2px solid transparent;}
.participant.active{ background:#4caf50; color:#fff;}
.participant.thinking{ background:#ff9800; color:#fff;}
.participant.waiting{ background:#e0e0e0; color:#666;}

/* 右栏：工具面板 */
.tools-panel{ background:#fff; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,.1); padding:20px; }
.tool-section{ margin-bottom:25px; padding-bottom:20px; border-bottom:1px solid #f0f0f0;}
.outline-item{ display:flex; align-items:center; gap:10px; padding:10px; border-radius:8px;}
.outline-item.completed{ background:#f1f8e9;} .outline-item.current{ background:#fff3e0; border:2px solid #ff9800;}

/* 响应式 */
@media (max-width:1024px){ .creation-workspace{ grid-template-columns:200px 1fr 250px; } }
@media (max-width:768px){
  .container{ padding:15px; }
  .creation-workspace{ grid-template-columns:1fr; gap:20px; }
  .agents-panel.collapsed{ display:none; }
  .project-controls{ flex-direction:column; gap:15px; align-items:stretch; }
}

/* === Bigger input box === */
.user-input{min-height:50px;min-width:500px;resize:vertical;font-size:1rem;line-height:1.6}

/* === Constrain heights / enable scroll === */
.story-content{height:calc(100vh - 220px);overflow-y:auto}
.chapter-content{max-height:55vh;overflow-y:auto;padding-right:6px}

/* === Compiled manuscript panel === */
#compiled-panel{max-height:35vh;overflow:auto}
.compiled-list{display:flex;flex-direction:column;gap:8px}
.compiled-item{padding:8px 10px;border-left:3px solid #4caf50;background:#f6fff6;border-radius:8px}
.compiled-item .jp{font-size:1rem;line-height:1.7;color:#222}
.compiled-item .zh{font-size:.92rem;opacity:.85;margin-top:4px}

/* == 非侵入式半圆指示器（不遮挡，仍可操作页面） == */
.mini-loader{position:fixed;right:16px;bottom:16px;width:36px;height:36px;pointer-events:none;opacity:0;transition:opacity .2s ease;z-index:20000}
.mini-loader.show{opacity:1}
.mini-loader::before{
  content:"";display:block;width:100%;height:100%;border-radius:999px;border:3px solid transparent;
  border-top-color:#4ECDC4;border-right-color:#4ECDC4; /* 只显示两侧 -> 半圆感 */
  animation:spin .9s linear infinite;
}
@keyframes spin{to{transform:rotate(1turn)}}

/* == 展示区拉大（约为之前的两倍可视高度） == */
.story-content{height:calc(100vh - 120px);overflow-y:auto}        /* 原来 ~100vh-220px */
.chapter-content{max-height:80vh;overflow-y:auto;padding-right:6px}/* 原来 55vh */
