<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€šçŸ¥ç»„ä»¶ - components/notification.html</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 40px;
            color: #2c3e50;
        }

        .demo-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .demo-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 40px;
        }

        .demo-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            color: white;
        }

        .demo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-success { background: linear-gradient(45deg, #56ab2f, #a8e6cf); }
        .btn-info { background: linear-gradient(45deg, #4facfe, #00f2fe); }
        .btn-warning { background: linear-gradient(45deg, #f093fb, #f5576c); }
        .btn-danger { background: linear-gradient(45deg, #ff416c, #ff4b2b); }

        /* é€šçŸ¥å®¹å™¨ */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 350px;
            z-index: 10000;
            pointer-events: none;
        }

        /* é€šçŸ¥åŸºç¡€æ ·å¼ */
        .notification {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border-left: 5px solid;
            display: flex;
            align-items: center;
            gap: 15px;
            transform: translateX(100%);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            pointer-events: all;
            position: relative;
            overflow: hidden;
        }

        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }

        .notification.hide {
            transform: translateX(100%);
            opacity: 0;
        }

        /* é€šçŸ¥ç±»å‹æ ·å¼ */
        .notification.success {
            border-left-color: #27ae60;
        }

        .notification.info {
            border-left-color: #3498db;
        }

        .notification.warning {
            border-left-color: #f39c12;
        }

        .notification.error {
            border-left-color: #e74c3c;
        }

        .notification.agent {
            border-left-color: #9b59b6;
        }

        /* é€šçŸ¥å›¾æ ‡ */
        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
            flex-shrink: 0;
        }

        .notification.success .notification-icon {
            background: #27ae60;
        }

        .notification.info .notification-icon {
            background: #3498db;
        }

        .notification.warning .notification-icon {
            background: #f39c12;
        }

        .notification.error .notification-icon {
            background: #e74c3c;
        }

        .notification.agent .notification-icon {
            background: #9b59b6;
        }

        /* é€šçŸ¥å†…å®¹ */
        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            font-size: 1em;
            margin-bottom: 5px;
            color: #2c3e50;
        }

        .notification-message {
            color: #7f8c8d;
            font-size: 0.9em;
            line-height: 1.4;
        }

        /* å…³é—­æŒ‰é’® */
        .notification-close {
            background: none;
            border: none;
            font-size: 18px;
            color: #bdc3c7;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .notification-close:hover {
            background: #ecf0f1;
            color: #7f8c8d;
        }

        /* è¿›åº¦æ¡ */
        .notification-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, rgba(0,0,0,0.1));
            border-radius: 0 0 15px 15px;
            animation: progressBar 5s linear;
        }

        @keyframes progressBar {
            from { width: 100%; }
            to { width: 0%; }
        }

        /* ç‰¹æ®Šé€šçŸ¥ç±»å‹ */
        .notification.learning-reminder {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .notification.learning-reminder .notification-title,
        .notification.learning-reminder .notification-message {
            color: white;
        }

        .notification.learning-reminder .notification-close {
            color: rgba(255, 255, 255, 0.7);
        }

        .notification.learning-reminder .notification-close:hover {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        /* æ™ºèƒ½ä½“é€šçŸ¥æ ·å¼ */
        .agent-notification {
            border-left-color: #9b59b6;
            background: linear-gradient(135deg, #f8f9ff 0%, #f0f4ff 100%);
        }

        .agent-avatar-small {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        /* ç³»ç»ŸçŠ¶æ€é€šçŸ¥ */
        .system-notification {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
        }

        .system-notification .notification-title,
        .system-notification .notification-message {
            color: white;
        }

        /* æˆå°±è§£é”é€šçŸ¥ */
        .achievement-notification {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: white;
            animation: celebrateShake 0.6s ease-in-out;
        }

        .achievement-notification .notification-title,
        .achievement-notification .notification-message {
            color: white;
        }

        @keyframes celebrateShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .notification-container {
                left: 20px;
                right: 20px;
                width: auto;
            }

            .notification {
                margin-bottom: 10px;
                padding: 15px;
            }
        }

        /* é€šçŸ¥å †å åŠ¨ç”» */
        .notification-stack {
            animation: stackPush 0.3s ease-out;
        }

        @keyframes stackPush {
            from {
                transform: translateY(-10px);
                opacity: 0.7;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <div class="demo-header">
            <h1>ğŸ”” é€šçŸ¥ç»„ä»¶æ¼”ç¤º</h1>
            <p>å¤šæ ·å¼é€šçŸ¥ç³»ç»Ÿï¼Œæ”¯æŒä¸åŒç±»å‹å’ŒåŠ¨ç”»æ•ˆæœ</p>
        </div>

        <div class="demo-buttons">
            <button class="demo-btn btn-success" onclick="showSuccessNotification()">âœ… æˆåŠŸé€šçŸ¥</button>
            <button class="demo-btn btn-info" onclick="showInfoNotification()">â„¹ï¸ ä¿¡æ¯é€šçŸ¥</button>
            <button class="demo-btn btn-warning" onclick="showWarningNotification()">âš ï¸ è­¦å‘Šé€šçŸ¥</button>
            <button class="demo-btn btn-danger" onclick="showErrorNotification()">âŒ é”™è¯¯é€šçŸ¥</button>
            <button class="demo-btn btn-success" onclick="showAgentNotification()">ğŸ¤– æ™ºèƒ½ä½“é€šçŸ¥</button>
            <button class="demo-btn btn-warning" onclick="showLearningReminder()">ğŸ“š å­¦ä¹ æé†’</button>
            <button class="demo-btn btn-info" onclick="showAchievementNotification()">ğŸ† æˆå°±è§£é”</button>
            <button class="demo-btn btn-danger" onclick="showSystemAlert()">âš™ï¸ ç³»ç»Ÿè­¦æŠ¥</button>
        </div>

        <div style="text-align: center; margin-top: 40px;">
            <button class="demo-btn btn-danger" onclick="clearAllNotifications()">ğŸ—‘ï¸ æ¸…é™¤æ‰€æœ‰é€šçŸ¥</button>
        </div>
    </div>

    <!-- é€šçŸ¥å®¹å™¨ -->
    <div class="notification-container" id="notificationContainer"></div>

    <script>
        // é€šçŸ¥ç®¡ç†å™¨
        class NotificationManager {
            constructor() {
                this.container = document.getElementById('notificationContainer');
                this.notifications = new Map();
                this.idCounter = 0;
            }

            show(options) {
                const id = ++this.idCounter;
                const notification = this.createNotification(id, options);

                this.container.appendChild(notification);
                this.notifications.set(id, notification);

                // è§¦å‘æ˜¾ç¤ºåŠ¨ç”»
                requestAnimationFrame(() => {
                    notification.classList.add('show');
                });

                // è‡ªåŠ¨å…³é—­
                if (options.autoClose !== false) {
                    setTimeout(() => {
                        this.hide(id);
                    }, options.duration || 5000);
                }

                // æ¨åŠ¨å…¶ä»–é€šçŸ¥
                this.stackNotifications();

                return id;
            }

            createNotification(id, options) {
                const notification = document.createElement('div');
                notification.className = `notification ${options.type || 'info'}`;
                notification.dataset.id = id;

                const icon = this.getIcon(options.type);
                const showProgress = options.showProgress !== false;

                notification.innerHTML = `
                    ${options.avatar ?
                        `<div class="agent-avatar-small">${options.avatar}</div>` :
                        `<div class="notification-icon">${icon}</div>`
                    }
                    <div class="notification-content">
                        <div class="notification-title">${options.title || this.getDefaultTitle(options.type)}</div>
                        <div class="notification-message">${options.message}</div>
                    </div>
                    <button class="notification-close" onclick="notificationManager.hide(${id})">&times;</button>
                    ${showProgress ? '<div class="notification-progress"></div>' : ''}
                `;

                // ç‰¹æ®Šæ ·å¼
                if (options.customClass) {
                    notification.classList.add(options.customClass);
                }

                return notification;
            }

            getIcon(type) {
                const icons = {
                    success: 'âœ“',
                    info: 'â„¹',
                    warning: 'âš ',
                    error: 'âœ•',
                    agent: 'ğŸ¤–'
                };
                return icons[type] || icons.info;
            }

            getDefaultTitle(type) {
                const titles = {
                    success: 'æ“ä½œæˆåŠŸ',
                    info: 'ä¿¡æ¯æç¤º',
                    warning: 'æ³¨æ„',
                    error: 'é”™è¯¯',
                    agent: 'æ™ºèƒ½ä½“æ¶ˆæ¯'
                };
                return titles[type] || 'é€šçŸ¥';
            }

            hide(id) {
                const notification = this.notifications.get(id);
                if (notification) {
                    notification.classList.add('hide');
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                        this.notifications.delete(id);
                        this.stackNotifications();
                    }, 300);
                }
            }

            stackNotifications() {
                const notifications = Array.from(this.container.children);
                notifications.forEach((notification, index) => {
                    if (index > 0) {
                        notification.classList.add('notification-stack');
                    }
                });
            }

            clear() {
                this.notifications.forEach((notification, id) => {
                    this.hide(id);
                });
            }

            // æ‰¹é‡æ˜¾ç¤ºé€šçŸ¥
            showBatch(notificationsArray) {
                notificationsArray.forEach((options, index) => {
                    setTimeout(() => {
                        this.show(options);
                    }, index * 200);
                });
            }

            // æ˜¾ç¤ºæ™ºèƒ½ä½“å¯¹è¯é€šçŸ¥
            showAgentMessage(agentName, message, avatar) {
                return this.show({
                    type: 'agent',
                    title: `${agentName} è¯´ï¼š`,
                    message: message,
                    avatar: avatar,
                    customClass: 'agent-notification',
                    duration: 8000
                });
            }

            // æ˜¾ç¤ºå­¦ä¹ æé†’
            showLearningReminder(message) {
                return this.show({
                    type: 'info',
                    title: 'ğŸ“š å­¦ä¹ æé†’',
                    message: message,
                    customClass: 'learning-reminder',
                    duration: 10000
                });
            }

            // æ˜¾ç¤ºæˆå°±è§£é”
            showAchievement(title, description) {
                return this.show({
                    type: 'success',
                    title: `ğŸ† ${title}`,
                    message: description,
                    customClass: 'achievement-notification',
                    duration: 8000,
                    showProgress: false
                });
            }

            // æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€
            showSystemStatus(message, isError = false) {
                return this.show({
                    type: isError ? 'error' : 'info',
                    title: 'âš™ï¸ ç³»ç»ŸçŠ¶æ€',
                    message: message,
                    customClass: 'system-notification',
                    duration: 6000
                });
            }
        }

        // åˆ›å»ºå…¨å±€é€šçŸ¥ç®¡ç†å™¨å®ä¾‹
        const notificationManager = new NotificationManager();

        // æ¼”ç¤ºå‡½æ•°
        function showSuccessNotification() {
            notificationManager.show({
                type: 'success',
                title: 'å­¦ä¹ å®Œæˆ',
                message: 'æ­å–œï¼æ‚¨å·²å®Œæˆä»Šå¤©çš„æ—¥è¯­å­¦ä¹ ç›®æ ‡ï¼Œè¯æ±‡æŒæ¡åº¦æå‡äº†15%',
                duration: 5000
            });
        }

        function showInfoNotification() {
            notificationManager.show({
                type: 'info',
                title: 'ç³»ç»Ÿæ›´æ–°',
                message: 'æ–°ç‰ˆæœ¬v2.1å·²å‘å¸ƒï¼Œå¢åŠ äº†è¯­éŸ³è¯†åˆ«åŠŸèƒ½å’Œæ›´å¤šæ™ºèƒ½ä½“è§’è‰²',
                duration: 6000
            });
        }

        function showWarningNotification() {
            notificationManager.show({
                type: 'warning',
                title: 'æ³¨æ„',
                message: 'æ‚¨çš„APIé…é¢å³å°†ç”¨å°½ï¼Œå»ºè®®å‡çº§åˆ°é«˜çº§ç‰ˆæœ¬ä»¥ç»§ç»­ä½¿ç”¨',
                duration: 8000
            });
        }

        function showErrorNotification() {
            notificationManager.show({
                type: 'error',
                title: 'è¿æ¥å¤±è´¥',
                message: 'æ— æ³•è¿æ¥åˆ°æ™ºèƒ½ä½“æœåŠ¡å™¨ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åé‡è¯•',
                duration: 7000
            });
        }

        function showAgentNotification() {
            notificationManager.showAgentMessage(
                'ç”°ä¸­å…ˆç”Ÿ',
                'æ‚¨çš„è¯­æ³•ç»ƒä¹ è¡¨ç°å¾ˆå¥½ï¼å»ºè®®ä¸‹æ¬¡ç»ƒä¹ æ—¶åŠ å¼ºæ•¬è¯­çš„ä½¿ç”¨ã€‚',
                'ç”°'
            );
        }

        function showLearningReminder() {
            notificationManager.showLearningReminder(
                'è¯¥å­¦ä¹ æ—¥è¯­äº†ï¼ä»Šå¤©çš„ç›®æ ‡æ˜¯æŒæ¡5ä¸ªæ–°çš„åŠ¨è¯æ´»ç”¨å½¢å¼ã€‚'
            );
        }

        function showAchievementNotification() {
            notificationManager.showAchievement(
                'è¯­æ³•å¤§å¸ˆ',
                'æ‚¨å·²è¿ç»­7å¤©å®Œæˆè¯­æ³•ç»ƒä¹ ï¼Œè·å¾—"è¯­æ³•å¤§å¸ˆ"ç§°å·ï¼'
            );
        }

        function showSystemAlert() {
            notificationManager.showSystemStatus(
                'æ™ºèƒ½ä½“æœåŠ¡å™¨è´Ÿè½½è¿‡é«˜ï¼Œå“åº”å¯èƒ½ä¼šæœ‰è½»å¾®å»¶è¿Ÿ',
                true
            );
        }

        function clearAllNotifications() {
            notificationManager.clear();
        }

        // æ¼”ç¤ºæ‰¹é‡é€šçŸ¥
        function showBatchNotifications() {
            const notifications = [
                {
                    type: 'info',
                    title: 'ä¼šè¯å¼€å§‹',
                    message: 'ä¸æ™ºèƒ½ä½“çš„å­¦ä¹ ä¼šè¯å·²å¼€å§‹'
                },
                {
                    type: 'agent',
                    title: 'å°ç¾è¯´ï¼š',
                    message: 'ä»Šå¤©æˆ‘ä»¬æ¥ç»ƒä¹ æ—¥å¸¸å¯¹è¯å§ï¼',
                    avatar: 'ç¾'
                },
                {
                    type: 'success',
                    title: 'è¯æ±‡å­¦ä¼š',
                    message: 'æ­å–œæŒæ¡æ–°è¯æ±‡"é ‘å¼µã£ã¦"'
                }
            ];

            notificationManager.showBatch(notifications);
        }

        // æ¨¡æ‹Ÿå®æ—¶é€šçŸ¥
        function simulateRealTimeNotifications() {
            const agentMessages = [
                { agent: 'ç”°ä¸­å…ˆç”Ÿ', avatar: 'ç”°', message: 'æ‚¨çš„åŠ©è¯ä½¿ç”¨æœ‰è¯¯ï¼Œåº”è¯¥ç”¨ã€Œã‚’ã€è€Œä¸æ˜¯ã€ŒãŒã€' },
                { agent: 'å°ç¾', avatar: 'ç¾', message: 'å“‡ï¼Œæ‚¨çš„å‘éŸ³è¿›æ­¥å¾ˆå¿«å‘¢ï¼' },
                { agent: 'å±±ç”°è€å¸ˆ', avatar: 'å±±', message: 'è¿™ä¸ªè¡¨è¾¾åœ¨å…³è¥¿åœ°åŒºæ¯”è¾ƒå¸¸ç”¨å“¦' },
                { agent: 'ã‚¢ã‚¤', avatar: 'AI', message: 'æ ¹æ®æ‚¨çš„å­¦ä¹ æ•°æ®ï¼Œå»ºè®®é‡ç‚¹å¤ä¹ åŠ¨è¯å˜ä½' }
            ];

            let index = 0;
            const interval = setInterval(() => {
                if (index < agentMessages.length) {
                    const msg = agentMessages[index];
                    notificationManager.showAgentMessage(msg.agent, msg.message, msg.avatar);
                    index++;
                } else {
                    clearInterval(interval);
                }
            }, 2000);
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ˜¾ç¤ºæ¬¢è¿é€šçŸ¥
        window.addEventListener('load', () => {
            setTimeout(() => {
                notificationManager.show({
                    type: 'info',
                    title: 'æ¬¢è¿ä½¿ç”¨é€šçŸ¥ç³»ç»Ÿ',
                    message: 'ç‚¹å‡»ä¸åŒæŒ‰é’®ä½“éªŒå„ç§é€šçŸ¥æ•ˆæœ',
                    duration: 4000
                });
            }, 500);
        });

        // é”®ç›˜å¿«æ·é”®æ”¯æŒ
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                notificationManager.clear();
            }
        });

        // æ·»åŠ ä¸€äº›é¢å¤–çš„æ¼”ç¤ºæŒ‰é’®
        const extraButtons = document.createElement('div');
        extraButtons.className = 'demo-buttons';
        extraButtons.style.marginTop = '20px';
        extraButtons.innerHTML = `
            <button class="demo-btn btn-info" onclick="showBatchNotifications()">ğŸ“š æ‰¹é‡é€šçŸ¥</button>
            <button class="demo-btn btn-warning" onclick="simulateRealTimeNotifications()">âš¡ æ¨¡æ‹Ÿå®æ—¶é€šçŸ¥</button>
        `;
        document.querySelector('.demo-container').appendChild(extraButtons);
    </script>
</body>
</html>